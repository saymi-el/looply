generator client {
provider = "prisma-client-js"
}


datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}


enum VideoStatus {
PENDING
RUNNING
COMPLETED
FAILED
}

model User {
id String @id @default(cuid())
email String @unique
passwordHash String
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
profile Profile?
videos VideoJob[]
}


model Profile {
id String @id @default(cuid())
user User @relation(fields: [userId], references: [id])
userId String @unique
displayName String?
brandColor String?
avatarUrl String?
context Json?
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
}


model VideoJob {
id String @id @default(cuid())
user User? @relation(fields: [userId], references: [id])
userId String?
status VideoStatus @default(PENDING)
request Json
result Json?
errorMessage String?
progress     Int         @default(0)
videoUrl     String?
vastJobId    String?
cloudProvider String?
metadata     String?
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
}